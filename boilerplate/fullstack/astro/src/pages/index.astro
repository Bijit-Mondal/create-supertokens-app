---
import Base from "../layouts/Base.astro";
import Home from "../components/Home";
import { getSessionForSSR } from "../superTokensHelpers";
import { ensureSuperTokensInit } from "../config/backend";

ensureSuperTokensInit();

const { accessTokenPayload, hasToken, error } = await getSessionForSSR(
  Astro.request
);

const SSRData = {
  accessTokenPayload,
  hasToken,
  error,
};
---

<Base>
  <Home
    client:only="react"
    accessTokenPayload={SSRData.accessTokenPayload}
    hasToken={SSRData.hasToken}
    error={SSRData.error}
  />
</Base>
